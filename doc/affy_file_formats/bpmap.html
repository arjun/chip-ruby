<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Affymetrix BPMAP File Format</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META 
content="Affymetrix, GeneChip, GeneChip Array, Netaffx, NetAffx Analysis Center, Affymetrics, Affimetrix, Affimetrics, " 
name=keywords>
<META 
content="Affymetrix is dedicated to developing state-of-the-art technology for acquiring, analyzing, and managing complex genetic information for use in biomedical research. Affymetrix sells GeneChip® brand arrays." 
name=description>
<SCRIPT language=JavaScript>
</SCRIPT>

<SCRIPT language=JavaScript src="files_files/main.js" 
type=text/javascript></SCRIPT>
<LINK href="files_files/style.css" type=text/css rel=stylesheet><LINK 
href="/favicon.ico" rel=icon>
<META content="Microsoft FrontPage 6.0" name=GENERATOR>
<style>
<!--
table.MsoTableClassic4
	{border-top:1.5pt solid black;
	border-left:1.0pt solid black;
	border-bottom:1.5pt solid black;
	border-right:1.0pt solid black;
	font-size:10.0pt;
	font-family:"Times New Roman";
	}
-->
</style>
</HEAD>
<BODY onresize=fixIt() vLink=#003366 aLink=#003366 link=#003366 bgColor=#ffffff 
leftMargin=0 topMargin=0 onunload=window.focus() marginheight="0" 
marginwidth="0">
<!-- Top links and Search plus noindex tags for atomz--> <NOINDEX> <TABLE cellSpacing=0 cellPadding=0 border=0> 
<TBODY> <TR> <TD vAlign=center align=left>&nbsp;</TD></TR> </TBODY> </TABLE><TABLE cellSpacing=0 cellPadding=0 border=0 width="601"> 
<TBODY> <TR> <TD vAlign=top align=left><IMG height=54 alt=Affymetrix src="files_files/affymetrix_logo.gif" width=128 border=0></TD><TD></TD><TD vAlign=center align=left class=pageheader><p>AFFYMETRIX 
DEVELOPER NETWORK</p></TD></TR> </TBODY> </TABLE></NOINDEX><TABLE CELLSPACING=0 CELLPADDING=0 WIDTH=772 BORDER=0> 
<TBODY> <TR> <TD VALIGN=top ALIGN=left WIDTH=772 BGCOLOR=#336699 HEIGHT="2"><IMG height=3 alt="" 
			src="files_files/spacer.gif" width=1 border=0></TD></TR> 
</TBODY> </TABLE><TABLE cellSpacing=0 cellPadding=5 width=409 
      background=files_files/network_background.gif border=0> <TBODY> <TR> <TD vAlign=top align=left> 
<TABLE cellSpacing=0 cellPadding=0 
            background=files_files/spacer.gif border=0> <TBODY> <TR><TD vAlign=top align=left width=11" ><IMG HEIGHT=1 ALT="" 
                        SRC="files_files/spacer.gif" WIDTH=11 BORDER=0></TD><TD vAlign=top align=left width="100%"><IMG height=41 alt="" 
                  src="files_files/spacer.gif" width=1 border=0></TD></TR> <TR> 
<TD vAlign=top align=left width=11" ><IMG HEIGHT=1 ALT="" 
                        SRC="files_files/spacer.gif" WIDTH=11 BORDER=0></TD><TD class=intro vAlign=top align=left> 
<P><span class="header2">Affymetrix® BPMAP File Format</span></P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>&nbsp;<TABLE cellSpacing=0 cellPadding=5 border=0> 
<TBODY> <TR> <TD vAlign=top align=left> <TABLE cellSpacing=0 cellPadding=0 border=0> 
<TBODY> <TR> <TD vAlign=top align=left> 
  <TABLE cellSpacing=0 cellPadding=0 border=0 > 
<TBODY> 
	<tr>
	<TD vAlign=top align=right style="BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: none; BORDER-BOTTOM-STYLE: none" width="11">
		<IMG height=11 alt="" src="files_files/bullet2.gif" width=11 border=0></TD>
	<TD vAlign=top align=left style="BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: none; BORDER-BOTTOM-STYLE: none" width="8">
		<IMG height=1 alt="" src="files_files/spacer.gif" width=5 border=0></TD>
	<TD class=header3 vAlign=center align=left  style="BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: none; BORDER-BOTTOM-STYLE: none">
	<a name="BPMAP_FILE"></a>BPMAP FILE</TD>
	</tr>
	<tr>
	<TD vAlign=top align=left colSpan=3 style="BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: none; BORDER-BOTTOM-STYLE: none" >
			<IMG height=10 alt="" src="files_files/spacer.gif" width=1 border=0></TD>
	</tr>
	<tr>
	<TD vAlign=top align=left style="BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: none; BORDER-BOTTOM-STYLE: none" width="11">
		<IMG height=1 alt="" src="files_files/spacer.gif" width=11 border=0></TD>
	<TD vAlign=top align=left style="BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: none; BORDER-BOTTOM-STYLE: none" width="8">
		<IMG height=1 alt="" src="files_files/spacer.gif" width=5 border=0></P><P>&nbsp;</P></TD>
	<TD class=content vAlign=top align=left  style="BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: none; BORDER-BOTTOM-STYLE: none">
		<span class="header4">Description</span><BR> The BPMAP 
file contains information relating to the design of the Affymetrix tiling 
	arrays.<p>Version 2 added the ability to a version, group and parameters 
		associated with each sequence item.</p>
		<p>Version 3 added the ability to store perfect match probes in addition 
		to probe pairs.</p>
		<P><span class="header4">Format</span><BR> The format of the 
	BPMAP 
file is a binary file with data stored in big-endian format. The following lists 
		the sections and their order and placement in the file. The definition 
	of each section is detailed below.</P>
		<blockquote>
			<P>File Header<P>Sequence Description for sequence #1<br>Sequence 
			Description for sequence #2<br>...<br>
			Sequence Description for sequence #N<P>Sequence Header for sequence #1<br>
			Position Information for probe/probe pair #1 of sequence #1<br>
			Position Information for probe/probe pair #2 of sequence #1<br>
			...<br>
			Position Information for probe/probe pair #M of sequence #1<P>
			Sequence Header for sequence #2<br>
			Position Information for probe/probe pair #1 of sequence #2<br>
			Position Information for probe/probe pair #2 of sequence #2<br>
			...<br>
			Position Information for probe/probe pair #M of sequence #2<P>...</blockquote>
		<P>Assuming there are N sequences and M_i probe pairs for sequence i.<P><span class="header4">Section Definitions</span></P>
	<P><span class="header4">File Header</span><br>
		<table border="1" cellpadding="0" cellspacing="0" span class=content id="table15" > 
<tr> <td width="38" height="14"><b>Item</b></td> <td width="70%" height="14"><b>
	Description</b></td><td width="141" height="14"><b>Type</b></td><td width="214" height="14">
	<b>Size</b></td></tr> <tr> <td width="38" height="14">1</td> 
	<td width="70%" height="14">Magic number. A value to identify the file type. 
	The value is set to 'PHT7\r\n\032\n'</td>
	<td width="141" height="14">char</td><td width="214" height="14">8 bytes</td></tr> <tr> 
	<td width="38" height="14">2</td> <td width="70%" height="14">The version 
	number of the file. The version number is either 1.0, 2.0 or 3.0.<p>Due to a bug 
	with the BPMAP file writer for early access arrays, this value may not be stored as a big endian 
	float. To read this value:</p>
	<blockquote>
		<p>When on a big endian machine: read 4 bytes, swap the direction of the 
	bytes, cast this to an integer, swap the bytes and cast to a float.</p><p>When on a little endian machine: read 4 bytes, cast the value as an 
	integer, swap by bytes and cast to a float.</blockquote>
	</td><td width="141" height="14">float</td><td width="214" height="14">
	4 bytes</td></tr> 
<tr> <td width="38" height="14">3</td> <td width="70%" height="14">Number of 
	sequences stored in the file.</td><td width="141" height="14">unsigned int</td><td width="214" height="14">
	4 bytes</td></tr>  
</table>
	<p><span class="header4">Sequence Description</span><br>
	<table border="1" cellpadding="0" cellspacing="0" span class=content id="table16"> 
<tr> <td width="38" height="14"><b>Item</b></td> <td width="70%" height="14"><b>
	Description</b></td><td width="141" height="14"><b>Type</b></td><td width="214" height="14">
	<b>Size</b></td></tr> <tr> <td width="38" height="14">1</td> 
	<td width="70%" height="14">Length of the sequence name.</td>
	<td width="141" height="14">unsigned int</td><td width="214" height="14">4 bytes</td></tr> <tr> 
	<td width="38" height="14">2</td> <td width="70%" height="14">Sequence name.</td>
	<td width="141" height="14">char</td><td width="214" height="14">Specified 
	by item #1.</td></tr> 
<tr>
	<td width="38" height="14">3</td> 
	<td width="70%" height="14">Probe mapping type. <b>(only for version 3.0 and above files)</b><p>0 indicates a 
	(PM/MM) probe 
	pair tiling across the sequence.<br>
	1 indicates a PM-only tiling across the sequence.</td>
	<td width="141" height="14">unsigned int</td><td width="214" height="14">4 
	bytes</td>
</tr>
<tr>
	<td width="38" height="14">4</td> 
	<td width="70%" height="14">Sequence file offset. <b>(only for version 3.0 and above files)</b><p>
	The offset (in bytes), from the beginning of the file, of the probe position information. This is intended to enable fast look-up 
	ability.</td>
	<td width="141" height="14">unsigned int</td><td width="214" height="14">4 
	bytes</td>
</tr>
<tr> <td width="38" height="14">5</td> <td width="70%" height="14">Number of 
	probes/probe pairs in the sequence.</td><td width="141" height="14">unsigned 
	int</td><td width="214" height="14">
	4 bytes</td></tr>  
<tr> <td width="38" height="14">6</td> <td width="70%" height="14">Length of the 
	group name <b>(only for version 2.0 and above files)</b></td><td width="141" height="14">
	unsigned int</td><td width="214" height="14">
	4 bytes</td></tr>  
<tr> <td width="38" height="14">7</td> <td width="70%" height="14">Group name<b> 
	(only for version 2.0 and above files)</b></td><td width="141" height="14">char</td><td width="214" height="14">
	Specified by item #4.</td></tr>  
<tr> <td width="38" height="14">8</td> <td width="70%" height="14">Length of the 
	version number <b>(only for version 2.0 and above files)</b></td><td width="141" height="14">
	unsigned int</td><td width="214" height="14">
	4 bytes</td></tr>  
<tr> <td width="38" height="14">9</td> <td width="70%" height="14">Version 
	number <b>(only for version 2.0 and above files)</b></td><td width="141" height="14">
	char</td><td width="214" height="14">
	Specified by item #6</td></tr>  
<tr> <td width="38" height="14">10</td> <td width="70%" height="14">Number of 
	parameters <b>(only for version 2.0 and above files)</b></td><td width="141" height="14">
	unsigned int</td><td width="214" height="14">
	4 bytes</td></tr>  
<tr> <td width="38" height="14">11</td> <td width="70%" height="14">Parameters 
	name/value. The number of parameters is specified by item #8.<b> (only for 
	version 2.0 and above files).</b><p>Each parameter is defined as a pair of 
	name/value strings where the strings are stored as the following:<li>unsigned 
	int (4 bytes) - This is the length of string.</li>
	<li>char (# characters defined by the length of the string) - This is the 
	name of the string.</li> </td><td width="141" height="14">see the description.</td><td width="214" height="14">
	see the description.</td></tr>  
</table>
	<p><span class="header4">Sequence Header</span><br>
	<table border="1" cellpadding="0" cellspacing="0"  span class=content id="table17"> 
<tr> <td width="38" height="14"><b>Item</b></td> <td width="70%" height="14"><b>
	Description</b></td><td width="141" height="14"><b>Type</b></td><td width="214" height="14">
	<b>Size</b></td></tr> <tr> <td width="38" height="14">1</td> 
	<td width="70%" height="14">Sequence ID</td>
	<td width="141" height="14">unsigned int</td><td width="214" height="14">4 bytes</td></tr>   
</table>
	<p><span class="header4">Position Information</span><br>
	<table border="1" cellpadding="0" cellspacing="0" span class=content id="table18"> 
<tr> <td width="38" height="14"><b>Item</b></td> <td width="70%" height="14"><b>
	Description</b></td><td width="141" height="14"><b>Type</b></td><td width="214" height="14">
	<b>Size</b></td></tr> <tr> <td width="38" height="14">1</td> 
	<td width="70%" height="14">X coordinate on array of the perfect match (PM) probe 
	(note: array coordinates are 0 based).</td>
	<td width="141" height="14">unsigned int</td><td width="214" height="14">4 
	bytes</td></tr> <tr> <td width="38" height="14">2</td> 
	<td width="70%" height="14">Y coordinate on array of the PM probe</td>
	<td width="141" height="14">unsigned int</td><td width="214" height="14">4 
	bytes</td></tr> 
<tr> <td width="38" height="14">3</td> <td width="70%" height="14">X coordinate 
	on array of the mismatch probe (MM) probe <b>(only if the probe mapping type 
	indicates PM/MM tiling)</b></td><td width="141" height="14">unsigned int</td><td width="214" height="14">4 bytes</td></tr>  
<tr> <td width="38" height="14">4</td> <td width="70%" height="14">Y coordinate 
	on array of the MM probe <b>(only if the probe mapping type indicates PM/MM 
	tiling)</b></td><td width="141" height="14">unsigned int</td><td width="214" height="14">
	4 bytes</td></tr>  
<tr> <td width="38" height="14">5</td> <td width="70%" height="14">Length of the 
	PM probe (and MM if a pair).</td><td width="141" height="14">unsigned char</td><td width="214" height="14">
	1 byte</td></tr>  
<tr> <td width="38" height="14">6</td> <td width="70%" height="14">Probe 
	sequence. The 25 base probe sequence is packed into a 7 byte character 
	sequence.<p>Each byte represents up to 4 bases (so the format can handle 
	probes of length up to 25bp).<br>
	The first byte contains the first 4 bases of the probe.<br>
	The first base of the probe is encoded in the two most significant bits of 
	the first byte.<br>
	The fourth base of the probe is encoded in the two least significant bits of 
	the first byte.<br>
	The conversion from each pair of bits to a DNA base is as follows: (0,1,2,3) 
	-&gt; (A,C,G,T)</td><td width="141" height="14">char</td><td width="214" height="14">
	7 bytes</td></tr>  
<tr> <td width="38" height="14">7</td> <td width="70%" height="14">Match score. 
	Note: The current BPMAP files are based on perfect match so the scores are 
	1.<p>See the bug description in the&nbsp; version number field above.</td>
	<td width="141" height="14">float</td><td width="214" height="14">4 bytes</td></tr>  
<tr> <td width="38" height="14">8</td> <td width="70%" height="14">Position of 
	the PM probe within the sequence. Note: The position is the 0-based position 
	of the lower coordinate of the 25-mer aligned to the target.</td><td width="141" height="14">
	unsigned int</td><td width="214" height="14">4 bytes</td></tr>  
<tr> <td width="38" height="14">9</td> <td width="70%" height="14">1 if the 
	matching target (not the probe) is on the forward strand, 0 if on the 
	reverse.</td>
	<td width="141" height="14">unsigned char</td><td width="214" height="14">1 
	byte</td></tr>  
</table>&nbsp;</td>
	</tr>
	



</table></TD></TR></TBODY>
</TABLE></TD></TR></TBODY>
</TABLE></TD></TR></TBODY>
</TABLE><p><BR> 
</p>
</BODY></HTML>